from __future__ import annotations

from mcp.server import Server

from resources.register_resources import register_resources
from tools.register_tools import register_tools
from version import SERVER_NAME, SERVER_VERSION


def create_mcp_server() -> Server:
    server = Server(
        SERVER_NAME,
        version=SERVER_VERSION,
        instructions="\n".join(
            [
                "# Unity-AI-Forge MCP Server v2.0.0 - Quick Reference",
                "AIé§†å‹•å‹Unityé–‹ç™ºãƒ„ãƒ¼ãƒ«ã‚­ãƒƒãƒˆã€‚MCPã‚µãƒ¼ãƒãƒ¼ + GameKitãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã€‚3å±¤æ§‹é€ ï¼ˆLow/Mid/High-Levelï¼‰ã§åŠ¹ç‡çš„ãªé–‹ç™ºã‚’å®Ÿç¾ã€‚",
                "",
                "## ğŸ”´ Critical Rules (å¿…ãšå®ˆã‚‹)",
                "1. .metaãƒ•ã‚¡ã‚¤ãƒ«ã¯çµ¶å¯¾ã«ç·¨é›†ã—ãªã„ï¼ˆUnityè‡ªå‹•ç®¡ç†ã€æ‰‹å‹•ç·¨é›†ã¯å‚ç…§ç ´å£Šï¼‰",
                "2. å…¨Unityæ“ä½œã«MCPãƒ„ãƒ¼ãƒ«ï¼ˆunity_*ï¼‰ã‚’ä½¿ç”¨",
                "3. å¤‰æ›´å‰ã« operation='inspect' ã§å¯¾è±¡ã‚’ç¢ºèª",
                "4. é©åˆ‡ãªãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ãƒ„ãƒ¼ãƒ«ã‚’é¸æŠï¼ˆLowâ†’è©³ç´°åˆ¶å¾¡ã€Midâ†’ãƒãƒƒãƒã€Highâ†’ã‚²ãƒ¼ãƒ ã‚·ã‚¹ãƒ†ãƒ ï¼‰",
                "5. ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ãŒå¿…è¦ãªæ“ä½œã¯è‡ªå‹•å¾…æ©Ÿï¼ˆãƒ–ãƒªãƒƒã‚¸å†æ¥ç¶šã§è§£é™¤ï¼‰",
                "",
                "## ğŸ—ï¸ 3å±¤ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£",
                "",
                "### Low-Level CRUD (8ãƒ„ãƒ¼ãƒ«) - åŸºæœ¬æ“ä½œ",
                "Scene, GameObject, Component, Asset, ScriptableObject, Prefab, VectorSprite, ProjectSettings",
                "ç”¨é€”: è©³ç´°ãªåˆ¶å¾¡ã€å˜ä¸€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæ“ä½œã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ç²¾å¯†è¨­å®š",
                "",
                "### Mid-Level Batch (7ãƒ„ãƒ¼ãƒ«) - ãƒãƒƒãƒæ“ä½œã¨ãƒ—ãƒªã‚»ãƒƒãƒˆ",
                "Transform, RectTransform, Physics, Camera, UI, Audio, Input",
                "ç”¨é€”: è¤‡æ•°ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆä¸€æ‹¬å‡¦ç†ã€ãƒ—ãƒªã‚»ãƒƒãƒˆé©ç”¨ã€ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆèª¿æ•´",
                "",
                "### High-Level GameKit (5ãƒ„ãƒ¼ãƒ«) - ã‚²ãƒ¼ãƒ ã‚·ã‚¹ãƒ†ãƒ æ§‹ç¯‰",
                "Actor, Manager, Interaction, UICommand, SceneFlow",
                "ç”¨é€”: ã‚²ãƒ¼ãƒ ãƒ¡ã‚«ãƒ‹ã‚¯ã‚¹ã€ã‚¿ãƒ¼ãƒ³åˆ¶å¾¡ã€ã‚·ãƒ¼ãƒ³é·ç§»ã€ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³",
                "",
                "## åŸºæœ¬ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼",
                "1. ç¢ºèª: unity_scene_crud(operation='inspect', includeHierarchy=True)",
                "2. æ“ä½œ: é©åˆ‡ãªãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ãƒ„ãƒ¼ãƒ«ã§å¤‰æ›´å®Ÿæ–½",
                "3. æ¤œè¨¼: operation='inspect' ã§çµæœç¢ºèª",
                "",
                "## ğŸ® High-Level GameKit Tools (æ¨å¥¨: ã‚²ãƒ¼ãƒ ã‚·ã‚¹ãƒ†ãƒ æ§‹ç¯‰)",
                "",
                "### GameKit Actor - ã‚²ãƒ¼ãƒ ã‚¢ã‚¯ã‚¿ãƒ¼",
                "- ä½œæˆ: unity_gamekit_actor(operation='create', actorId='player_001', actorType='player', behaviorProfile='2dPhysics'|'2dLinear'|'2dTileGrid'|'3dCharacterController'|'3dPhysics'|'3dNavMesh', controlMode='directController'|'aiAutonomous'|'uiCommand'|'scriptTriggerOnly', stats={'health': 100, 'speed': 5.0}, abilities=['Jump', 'Attack'])",
                "- æ›´æ–°: unity_gamekit_actor(operation='update', actorId='...', stats={'health': 80})",
                "- æ¤œæŸ»: unity_gamekit_actor(operation='inspect', actorId='...')",
                "",
                "### GameKit Manager - ã‚²ãƒ¼ãƒ ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼",
                "- ä½œæˆ: unity_gamekit_manager(operation='create', managerId='game_manager', managerType='turnBased'|'realtime'|'resourcePool'|'eventHub'|'stateManager', turnPhases=['PlayerTurn', 'EnemyTurn'], resourcePool={'actionPoints': 3}, dontDestroyOnLoad=True)",
                "- ã‚¿ãƒ¼ãƒ³é€²è¡Œ: unity_gamekit_manager(operation='update', managerId='...', advancePhase=True)",
                "- ãƒªã‚½ãƒ¼ã‚¹æ¶ˆè²»: unity_gamekit_manager(operation='update', managerId='...', consumeResource={'resourceName': 'actionPoints', 'amount': 1})",
                "",
                "### GameKit Interaction - ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³",
                "- ä½œæˆ: unity_gamekit_interaction(operation='create', interactionId='door_trigger', triggerType='trigger'|'collision'|'raycast'|'proximity'|'input', actions=[{'type': 'changeScene', 'target': 'Level2'}], conditions=[{'type': 'tag', 'value': 'Player'}])",
                "- ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒ—: spawnPrefab, destroyObject, playSound, sendMessage, changeScene",
                "",
                "### GameKit UI Command - UIã‚³ãƒãƒ³ãƒ‰ãƒ‘ãƒãƒ«",
                "- ä½œæˆ: unity_gamekit_ui_command(operation='createCommandPanel', panelName='CommandPanel', commands=['Move', 'Attack', 'Defend'], layout='horizontal'|'vertical'|'grid', targetActorId='player_001')",
                "",
                "### GameKit SceneFlow - ã‚·ãƒ¼ãƒ³é·ç§»ç®¡ç†",
                "- ä½œæˆ: unity_gamekit_sceneflow(operation='create', flowId='main_flow', scenes=[{'name': 'Title', 'path': 'Assets/Scenes/Title.unity', 'loadMode': 'single'}, {'name': 'Level1', 'path': '...', 'loadMode': 'additive', 'sharedGroups': ['UI', 'Audio']}], sharedSceneGroups={'UI': ['Assets/Scenes/GameUI.unity']}, transitions=[{'from': 'Title', 'to': 'Level1', 'trigger': 'StartGame'}])",
                "- é·ç§»: unity_gamekit_sceneflow(operation='transition', flowId='...', trigger='StartGame')",
                "",
                "## âš¡ Mid-Level Batch Tools (æ¨å¥¨: ãƒãƒƒãƒæ“ä½œ)",
                "",
                "### Transform Batch - é…ç½®ã¨ãƒªãƒãƒ¼ãƒ ",
                "- å††å½¢é…ç½®: unity_transform_batch(operation='arrangeCircle', gameObjectPaths=['Obj1', 'Obj2'], radius=5.0, startAngle=0)",
                "- ç›´ç·šé…ç½®: unity_transform_batch(operation='arrangeLine', gameObjectPaths=[...], startPosition={...}, endPosition={...})",
                "- é€£ç•ªãƒªãƒãƒ¼ãƒ : unity_transform_batch(operation='renameSequential', gameObjectPaths=[...], baseName='Enemy', startIndex=1, padding=3)",
                "",
                "### RectTransform Batch - UIãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ",
                "- ã‚¢ãƒ³ã‚«ãƒ¼è¨­å®š: unity_rectTransform_batch(operation='setAnchors', gameObjectPaths=[...], anchorMin={'x': 0, 'y': 0}, anchorMax={'x': 1, 'y': 1})",
                "- è¦ªã«æ•´åˆ—: unity_rectTransform_batch(operation='alignToParent', gameObjectPaths=[...], preset='topLeft'|'center'|'bottomRight')",
                "- åˆ†é…: unity_rectTransform_batch(operation='distribute', gameObjectPaths=[...], direction='horizontal'|'vertical', spacing=10)",
                "",
                "### Physics Bundle - ç‰©ç†ãƒ—ãƒªã‚»ãƒƒãƒˆ",
                "- 2Dãƒ—ãƒªã‚»ãƒƒãƒˆ: unity_physics_bundle(operation='applyPreset2D', gameObjectPath='...', preset='dynamic'|'kinematic'|'static'|'character'|'platformer'|'topDown'|'vehicle'|'projectile')",
                "- 3Dãƒ—ãƒªã‚»ãƒƒãƒˆ: unity_physics_bundle(operation='applyPreset3D', gameObjectPath='...', preset='dynamic'|'kinematic'|'static'|'character'|'vehicle'|'projectile')",
                "",
                "### Camera Rig - ã‚«ãƒ¡ãƒ©è¨­å®š",
                "- ä½œæˆ: unity_camera_rig(operation='createRig', rigType='follow'|'orbit'|'splitScreen'|'fixed'|'dolly', cameraName='MainCamera', targetPath='Player', offset={'x': 0, 'y': 5, 'z': -10}, smoothSpeed=5.0)",
                "",
                "### UI Foundation - UIåŸºç¤è¦ç´ ",
                "- Canvas: unity_ui_foundation(operation='createCanvas', canvasName='GameUI', renderMode='screenSpaceOverlay'|'screenSpaceCamera'|'worldSpace')",
                "- Button: unity_ui_foundation(operation='createButton', buttonName='...', parentPath='Canvas', text='...', anchorPreset='center', width=200, height=60)",
                "",
                "### Audio Source Bundle - ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªè¨­å®š",
                "- ä½œæˆ: unity_audio_source_bundle(operation='createAudioSource', gameObjectPath='...', preset='music'|'sfx'|'ambient'|'voice'|'ui', audioClipPath='...', volume=1.0, loop=True)",
                "",
                "### Input Profile - å…¥åŠ›ã‚·ã‚¹ãƒ†ãƒ ",
                "- ä½œæˆ: unity_input_profile(operation='createPlayerInput', gameObjectPath='...', actionMapType='player'|'ui'|'vehicle', notificationBehavior='sendMessages'|'broadcastMessages'|'invokeUnityEvents')",
                "",
                "## ğŸ”§ Low-Level CRUD Tools (è©³ç´°åˆ¶å¾¡)",
                "",
                "### Scene & GameObject",
                "- ä½œæˆ: unity_gameobject_crud(operation='create', name='...', parentPath='...')",
                "- è¤‡æ•°æ¤œç´¢: unity_gameobject_crud(operation='findMultiple', pattern='Enemy*', maxResults=100)",
                "- ç§»å‹•: unity_gameobject_crud(operation='move', gameObjectPath='...', parentPath='...')",
                "",
                "### Component",
                "- è¿½åŠ : unity_component_crud(operation='add', gameObjectPath='...', componentType='UnityEngine.Rigidbody', propertyChanges={...})",
                "- æ›´æ–°: unity_component_crud(operation='update', gameObjectPath='...', componentType='...', propertyChanges={...})",
                "- ãƒãƒƒãƒè¿½åŠ : unity_component_crud(operation='addMultiple', pattern='Enemy*', componentType='...', stopOnError=False, maxResults=100)",
                "",
                "### Asset & Script",
                "- ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ: unity_asset_crud(operation='create', assetPath='Assets/Data/config.json', content='...')",
                "- æ›´æ–°: unity_asset_crud(operation='update', assetPath='...', content='...')",
                "  âš ï¸ C#ã‚¹ã‚¯ãƒªãƒ—ãƒˆä½œæˆ/æ›´æ–°å¾Œã¯è‡ªå‹•ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«å¾…æ©Ÿï¼ˆ60ç§’ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã€ãƒ–ãƒªãƒƒã‚¸å†æ¥ç¶šã§è§£é™¤ï¼‰",
                "- ã‚¤ãƒ³ãƒãƒ¼ã‚¿ãƒ¼è¨­å®š: unity_asset_crud(operation='updateImporter', assetPath='...', propertyChanges={...})",
                "",
                "### ScriptableObject",
                "- ä½œæˆ: unity_scriptableObject_crud(operation='create', typeName='MyGame.GameConfig', assetPath='Assets/Data/....asset', properties={...})",
                "- æ¤œæŸ»: unity_scriptableObject_crud(operation='inspect', assetPath='...', includeProperties=True, propertyFilter=['version', 'maxPlayers'])",
                "- æ›´æ–°: unity_scriptableObject_crud(operation='update', assetPath='...', properties={...})",
                "- å‹æ¤œç´¢: unity_scriptableObject_crud(operation='findByType', typeName='...', searchPath='Assets/Data', maxResults=100)",
                "",
                "### Prefab",
                "- ä½œæˆ: unity_prefab_crud(operation='create', gameObjectPath='...', prefabPath='Assets/Prefabs/....prefab', includeChildren=True)",
                "- ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–: unity_prefab_crud(operation='instantiate', prefabPath='...', targetPath='...', position={...}, rotation={...})",
                "- ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰é©ç”¨: unity_prefab_crud(operation='applyOverrides', gameObjectPath='...')",
                "- ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ç ´æ£„: unity_prefab_crud(operation='revertOverrides', gameObjectPath='...')",
                "- ã‚¢ãƒ³ãƒ‘ãƒƒã‚¯: unity_prefab_crud(operation='unpack', gameObjectPath='...', unpackMode='outmostRoot'|'completely')",
                "",
                "### Vector Sprite (ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ç”¨)",
                "å¤–éƒ¨ã‚¢ã‚»ãƒƒãƒˆä¸è¦ã§å³åº§ã«ç”Ÿæˆã€‚ã‚²ãƒ¼ãƒ ã‚¸ãƒ£ãƒ ã€ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ”ãƒ³ã‚°ã€ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ã«æœ€é©ã€‚",
                "- ãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–: unity_vector_sprite_convert(operation='primitiveToSprite', primitiveType='circle'|'square'|'triangle'|'polygon', color={'r':1,'g':0,'b':0,'a':1}, outputPath='Assets/Sprites/....png', width=256, height=256)",
                "- å˜è‰²: unity_vector_sprite_convert(operation='createColorSprite', width=64, height=64, color={...}, outputPath='...')",
                "- SVGå¤‰æ›: unity_vector_sprite_convert(operation='svgToSprite', svgPath='...', outputPath='...', width=512, height=512)",
                "- ãƒ†ã‚¯ã‚¹ãƒãƒ£â†’ã‚¹ãƒ—ãƒ©ã‚¤ãƒˆ: unity_vector_sprite_convert(operation='textureToSprite', texturePath='...', pixelsPerUnit=100, filterMode='point'|'bilinear')",
                "",
                "### Project Settings",
                "- èª­ã¿å–ã‚Š: unity_projectSettings_crud(operation='read', category='player'|'quality'|'time'|'physics'|'audio'|'editor', property='...')",
                "- æ›¸ãè¾¼ã¿: unity_projectSettings_crud(operation='write', category='...', property='...', value=...)",
                "- ã‚¿ã‚°è¿½åŠ : unity_projectSettings_crud(operation='addTag', tag='...')",
                "- ãƒ¬ã‚¤ãƒ¤ãƒ¼è¿½åŠ : unity_projectSettings_crud(operation='addLayer', layer='...')",
                "",
                "## âš¡ Performance & Best Practices",
                "",
                "### ãƒ„ãƒ¼ãƒ«é¸æŠã‚¬ã‚¤ãƒ‰:",
                "1. **ã‚²ãƒ¼ãƒ ã‚·ã‚¹ãƒ†ãƒ æ§‹ç¯‰** â†’ High-Level GameKit (Actor, Manager, Interaction, UICommand, SceneFlow)",
                "2. **è¤‡æ•°ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå‡¦ç†** â†’ Mid-Level Batch (Transform, RectTransform, Physics, Camera, UI, Audio, Input)",
                "3. **è©³ç´°ãªå€‹åˆ¥åˆ¶å¾¡** â†’ Low-Level CRUD (GameObject, Component, Asset, ScriptableObject, Prefab)",
                "",
                "### é«˜é€ŸåŒ–ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯:",
                "1. includeProperties=False: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå­˜åœ¨ç¢ºèªã®ã¿ï¼ˆ10å€é«˜é€Ÿï¼‰",
                "2. propertyFilter: å¿…è¦ãªãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®ã¿å–å¾—",
                "3. maxResults: å¤§é‡æ“ä½œæ™‚ã®ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆé˜²æ­¢ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ1000ï¼‰",
                "4. stopOnError=False: ãƒãƒƒãƒå‡¦ç†ã§ã‚¨ãƒ©ãƒ¼æ™‚ã‚‚ç¶šè¡Œ",
                "",
                "### ãƒãƒƒãƒæ“ä½œï¼ˆæ¨å¥¨ï¼‰:",
                "âŒ é¿ã‘ã‚‹: ãƒ«ãƒ¼ãƒ—å†…ã§å€‹åˆ¥ãƒ„ãƒ¼ãƒ«å‘¼ã³å‡ºã—",
                "âœ… æ¨å¥¨: Mid-Level Batchãƒ„ãƒ¼ãƒ«ã¾ãŸã¯ *Multiple æ“ä½œ",
                "ä¾‹: unity_transform_batch(operation='arrangeCircle', gameObjectPaths=[...])",
                "ä¾‹: unity_component_crud(operation='addMultiple', pattern='Enemy*', ...)",
                "",
                "### ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«å¾…æ©Ÿï¼ˆè‡ªå‹•ï¼‰:",
                "- C#ã‚¹ã‚¯ãƒªãƒ—ãƒˆä½œæˆ/æ›´æ–°å¾Œã€è‡ªå‹•çš„ã«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«å¾…æ©Ÿ",
                "- å¾…æ©Ÿä¸­ã«ãƒ–ãƒªãƒƒã‚¸ãŒå†æ¥ç¶šã•ã‚Œã‚‹ã¨å³åº§ã«è§£é™¤",
                "- ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ: 60ç§’ï¼ˆè¨­å®šå¤‰æ›´ä¸å¯ï¼‰",
                "- ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã« compilationWait æƒ…å ±ãŒå«ã¾ã‚Œã‚‹",
                "",
                "## ğŸ® Game Development Workflow",
                "",
                "### æ¨å¥¨é–‹ç™ºãƒ•ãƒ­ãƒ¼:",
                "1. **ã‚²ãƒ¼ãƒ ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆ** (High-Level GameKit)",
                "   - GameKit Actor: ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã€æ•µã€NPCã®ä½œæˆ",
                "   - GameKit Manager: ã‚¿ãƒ¼ãƒ³åˆ¶å¾¡ã€ãƒªã‚½ãƒ¼ã‚¹ç®¡ç†",
                "   - GameKit SceneFlow: ã‚·ãƒ¼ãƒ³é·ç§»è¨­è¨ˆ",
                "",
                "2. **ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³å®Ÿè£…** (High-Level GameKit)",
                "   - GameKit Interaction: ãƒˆãƒªã‚¬ãƒ¼ã¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å®šç¾©",
                "   - GameKit UICommand: UIã‹ã‚‰ã®ã‚³ãƒãƒ³ãƒ‰é€ä¿¡",
                "",
                "3. **è©³ç´°èª¿æ•´** (Mid/Low-Level)",
                "   - Mid-Level: ç‰©ç†ã€ã‚«ãƒ¡ãƒ©ã€UIã€ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªã®ãƒ—ãƒªã‚»ãƒƒãƒˆé©ç”¨",
                "   - Low-Level: å€‹åˆ¥ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®å¾®èª¿æ•´",
                "",
                "4. **æ¼”å‡ºè¿½åŠ ** (æœ€å¾Œ)",
                "   - ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã€ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã€ã‚µã‚¦ãƒ³ãƒ‰",
                "   - UIé·ç§»ã€ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯æ¼”å‡º",
                "",
                "### GameKitä½¿ç”¨ä¾‹:",
                "```python",
                "# 1. ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚¢ã‚¯ã‚¿ãƒ¼ä½œæˆ",
                "unity_gamekit_actor(operation='create', actorId='player', behaviorProfile='2dPhysics', controlMode='directController', stats={'health': 100})",
                "",
                "# 2. ã‚¿ãƒ¼ãƒ³åˆ¶ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ä½œæˆ",
                "unity_gamekit_manager(operation='create', managerId='turn_mgr', managerType='turnBased', turnPhases=['PlayerTurn', 'EnemyTurn'])",
                "",
                "# 3. ãƒ‰ã‚¢ãƒˆãƒªã‚¬ãƒ¼ä½œæˆ",
                "unity_gamekit_interaction(operation='create', interactionId='door', triggerType='trigger', actions=[{'type': 'changeScene', 'target': 'Level2'}])",
                "",
                "# 4. ã‚·ãƒ¼ãƒ³ãƒ•ãƒ­ãƒ¼è¨­å®š",
                "unity_gamekit_sceneflow(operation='create', flowId='main', scenes=[...], transitions=[...])",
                "```",
                "",
                "## ğŸ”§ Troubleshooting",
                "",
                "### æ¥ç¶šã‚¨ãƒ©ãƒ¼",
                "1. unity_ping ã§æ¥ç¶šç¢ºèª",
                "2. Unity Editor: Tools > MCP Assistant ãŒèµ·å‹•ã—ã¦ã„ã‚‹ã‹ç¢ºèª",
                "3. ãƒãƒ¼ãƒˆ7077ãŒä½¿ç”¨å¯èƒ½ã‹ç¢ºèª",
                "",
                "### ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼",
                "- C#ã‚¹ã‚¯ãƒªãƒ—ãƒˆä½œæˆ/æ›´æ–°å¾Œã¯è‡ªå‹•ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«å¾…æ©Ÿ",
                "- ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã® compilationWait æƒ…å ±ã‚’ç¢ºèª",
                "- Unity Editorã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãƒ­ã‚°ã§ã‚¨ãƒ©ãƒ¼è©³ç´°ã‚’ç¢ºèª",
                "",
                "### ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ",
                "1. maxResults ã‚’æ¸›ã‚‰ã™ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ1000 â†’ 100ä»¥ä¸‹ï¼‰",
                "2. includeProperties=False ã§é«˜é€ŸåŒ–",
                "3. stopOnError=False ã§ãƒãƒƒãƒæ“ä½œç¶šè¡Œ",
                "4. Mid-Level Batchãƒ„ãƒ¼ãƒ«ã‚’ä½¿ç”¨ï¼ˆå€‹åˆ¥å‘¼ã³å‡ºã—ã‚ˆã‚Šé«˜é€Ÿï¼‰",
                "",
                "### ãƒ–ãƒªãƒƒã‚¸å†æ¥ç¶š",
                "- ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ä¸­ã«ãƒ–ãƒªãƒƒã‚¸ãŒå†æ¥ç¶šã•ã‚ŒãŸå ´åˆã€è‡ªå‹•çš„ã«å¾…æ©Ÿè§£é™¤",
                "- ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã« bridgeReconnected: true ãŒå«ã¾ã‚Œã‚‹",
                "- å†æ¥ç¶šå¾Œã€æ“ä½œã‚’å†è©¦è¡Œã—ã¦ãã ã•ã„",
                "",
                "## ğŸ“‹ Quick Reference",
                "",
                "### å…¨21ãƒ„ãƒ¼ãƒ«ä¸€è¦§:",
                "",
                "**High-Level GameKit (5):**",
                "unity_gamekit_actor, unity_gamekit_manager, unity_gamekit_interaction, unity_gamekit_ui_command, unity_gamekit_sceneflow",
                "",
                "**Mid-Level Batch (7):**",
                "unity_transform_batch, unity_rectTransform_batch, unity_physics_bundle, unity_camera_rig, unity_ui_foundation, unity_audio_source_bundle, unity_input_profile",
                "",
                "**Low-Level CRUD (8):**",
                "unity_scene_crud, unity_gameobject_crud, unity_component_crud, unity_asset_crud, unity_scriptableObject_crud, unity_prefab_crud, unity_vector_sprite_convert, unity_projectSettings_crud",
                "",
                "**Utility (1):**",
                "unity_ping",
                "",
                "### GameObjectè­˜åˆ¥æ–¹æ³•:",
                "- gameObjectPath: éšå±¤ãƒ‘ã‚¹ï¼ˆä¾‹: 'Canvas/Panel/Button'ï¼‰",
                "- gameObjectGlobalObjectId: GlobalObjectIdæ–‡å­—åˆ—ï¼ˆã‚·ãƒ¼ãƒ³å†èª­ã¿è¾¼ã¿å¾Œã‚‚å®‰å®šï¼‰",
                "",
                "### ã‚ˆãã‚ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ—ãƒ­ãƒ‘ãƒ†ã‚£:",
                "- Transform: position, rotation, localScale",
                "- RectTransform: anchoredPosition, sizeDelta, anchorMin, anchorMax, pivot",
                "- Rigidbody: mass, drag, useGravity, constraints",
                "- Rigidbody2D: mass, linearDamping, angularDamping, gravityScale, constraints",
                "- Camera: fieldOfView, clearFlags, backgroundColor",
                "",
                "### å‘½åè¦å‰‡:",
                "å…¨ãƒ„ãƒ¼ãƒ«åã¯ unity_* å½¢å¼ï¼ˆã‚¢ãƒ³ãƒ€ãƒ¼ã‚¹ã‚³ã‚¢åŒºåˆ‡ã‚Šï¼‰",
                "ä¾‹: unity_gamekit_actor, unity_transform_batch, unity_gameobject_crud",
                "",
                "---",
                "SkillForUnity v1.8.0 - 21 Tools, 100+ Operations, 3-Layer Architecture",
            ]
        ),
    )

    register_resources(server)
    register_tools(server)

    return server

